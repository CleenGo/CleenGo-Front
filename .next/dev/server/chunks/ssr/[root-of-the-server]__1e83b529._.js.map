{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 88, "column": 0}, "map": {"version":3,"sources":["file:///C:/Proyecto_final/PF-CleenGo/CleenGo-Front/src/app/services/http.ts"],"sourcesContent":["import axios from \"axios\";\r\n\r\nexport const http = axios.create({\r\n  baseURL: process.env.VITE_BACKEND_URL || \"http://localhost:3000\",\r\n  withCredentials: true,\r\n});\r\n"],"names":[],"mappings":";;;;AAAA;;AAEO,MAAM,OAAO,gJAAK,CAAC,MAAM,CAAC;IAC/B,SAAS,8DAAgC;IACzC,iBAAiB;AACnB"}},
    {"offset": {"line": 102, "column": 0}, "map": {"version":3,"sources":["file:///C:/Proyecto_final/PF-CleenGo/CleenGo-Front/src/app/services/auth.ts"],"sourcesContent":["// src/app/services/auth.ts\r\n\r\nimport { http } from \"./http\";\r\n\r\n// --------- Tipos para registro normal ---------\r\nexport interface RegisterClientRequest {\r\n  name: string;\r\n  surname: string;\r\n  email: string;\r\n  password: string;\r\n  confirmPassword: string;\r\n  birthDate: string;\r\n  profileImgUrl?: string;\r\n  phone: string;\r\n}\r\n\r\nexport interface RegisterClientResponse {\r\n  message: string;\r\n  user: any;\r\n  token?: string; // por si el backend devuelve token al registrar\r\n}\r\n\r\nexport interface RegisterProviderRequest {\r\n  name: string;\r\n  surname: string;\r\n  email: string;\r\n  password: string;\r\n  confirmPassword: string;\r\n  birthDate: string;\r\n  profileImgUrl?: string;\r\n  phone: string;\r\n\r\n  // Campos específicos del provider:\r\n  days: string[];  \r\n  hours: string[];  \r\n  about: string;    \r\n}\r\n\r\nexport interface RegisterProviderResponse {\r\n  message: string;\r\n  provider: any;\r\n  token?: string;\r\n}\r\n\r\n\r\n// --------- Tipos para login normal ---------\r\nexport interface LoginRequest {\r\n  email: string;\r\n  password: string;\r\n}\r\n\r\nexport interface LoginResponse {\r\n  message: string;\r\n  accessToken: string;\r\n  user: any;\r\n}\r\n\r\n// --------- Tipos para login por terceros (OAuth) ---------\r\nexport interface ThirdPartyLoginRequest {\r\n  accessToken: string;\r\n  name: string | null;\r\n  surname: string | null;\r\n  phone: string | null;\r\n  profileImgUrl: string | null;\r\n}\r\n\r\nexport interface ThirdPartyLoginResponse {\r\n  message: string;\r\n  accessToken: string;\r\n  user: any;\r\n}\r\n\r\n// --------- Servicios ---------\r\nexport async function registerClient(data: RegisterClientRequest) {\r\n  const response = await http.post<RegisterClientResponse>(\r\n    \"/auth/register/client\",\r\n    data\r\n  );\r\n  return response.data;\r\n}\r\n\r\nexport async function login(data: LoginRequest) {\r\n  const response = await http.post<LoginResponse>(\"/auth/login\", data);\r\n  return response.data;\r\n}\r\n\r\nexport async function registerProvider(data: RegisterProviderRequest) {\r\n  const response = await http.post<RegisterProviderResponse>(\r\n    \"/auth/register/provider\",\r\n    data\r\n  );\r\n  return response.data;\r\n}\r\n\r\n\r\n// Login / registro con Google (Supabase OAuth)\r\nexport async function thirdPartyLogin(\r\n  role: \"client\" | \"provider\",\r\n  data: ThirdPartyLoginRequest\r\n) {\r\n  const response = await http.post<ThirdPartyLoginResponse>(\r\n    `/auth/third-party/${role}`,\r\n    data\r\n  );\r\n  return response.data;\r\n}\r\n\r\n"],"names":[],"mappings":"AAAA,2BAA2B;;;;;;;;;;;AAE3B;;AAuEO,eAAe,eAAe,IAA2B;IAC9D,MAAM,WAAW,MAAM,sIAAI,CAAC,IAAI,CAC9B,yBACA;IAEF,OAAO,SAAS,IAAI;AACtB;AAEO,eAAe,MAAM,IAAkB;IAC5C,MAAM,WAAW,MAAM,sIAAI,CAAC,IAAI,CAAgB,eAAe;IAC/D,OAAO,SAAS,IAAI;AACtB;AAEO,eAAe,iBAAiB,IAA6B;IAClE,MAAM,WAAW,MAAM,sIAAI,CAAC,IAAI,CAC9B,2BACA;IAEF,OAAO,SAAS,IAAI;AACtB;AAIO,eAAe,gBACpB,IAA2B,EAC3B,IAA4B;IAE5B,MAAM,WAAW,MAAM,sIAAI,CAAC,IAAI,CAC9B,CAAC,kBAAkB,EAAE,MAAM,EAC3B;IAEF,OAAO,SAAS,IAAI;AACtB"}},
    {"offset": {"line": 135, "column": 0}, "map": {"version":3,"sources":["file:///C:/Proyecto_final/PF-CleenGo/CleenGo-Front/src/app/components/RegisterFormProvider.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport Image from \"next/image\";\r\nimport { useForm } from \"react-hook-form\";\r\nimport { registerProvider } from \"@/app/services/auth\";\r\nimport { useState } from \"react\";\r\n\r\ninterface ProviderFormData {\r\n    name: string;\r\n    surname: string;\r\n    email: string;\r\n    password: string;\r\n    confirmPassword: string;\r\n    birthDate: string;\r\n    profileImgUrl?: string;\r\n    phone: string;\r\n    days: string[];\r\n    hours: string[];\r\n    about: string;\r\n}\r\n\r\nexport default function RegisterProviderForm() {\r\n    const {\r\n        register,\r\n        handleSubmit,\r\n        watch,\r\n        formState: { errors },\r\n    } = useForm<ProviderFormData>();\r\n\r\n    const [loading, setLoading] = useState(false);\r\n    const [success, setSuccess] = useState(\"\");\r\n    const [error, setError] = useState(\"\");\r\n\r\n    const passwordValue = watch(\"password\");\r\n    const birthDateValue = watch(\"birthDate\");\r\n\r\n    const onSubmit = async (data: ProviderFormData) => {\r\n        setLoading(true);\r\n        setError(\"\");\r\n        setSuccess(\"\");\r\n\r\n        try {\r\n            const response = await registerProvider(data);\r\n            setSuccess(\"Proveedor registrado exitosamente\");\r\n        } catch (err: any) {\r\n            setError(err.response?.data?.message || \"Error inesperado\");\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    // VALIDAR SI ES MAYOR DE 18\r\n    const validateAge = (value: string) => {\r\n        const today = new Date();\r\n        const birth = new Date(value);\r\n\r\n        const age = today.getFullYear() - birth.getFullYear();\r\n        const monthDiff = today.getMonth() - birth.getMonth();\r\n\r\n        if (\r\n            monthDiff < 0 ||\r\n            (monthDiff === 0 && today.getDate() < birth.getDate())\r\n        ) {\r\n            return age - 1;\r\n        }\r\n\r\n        return age;\r\n    };\r\n\r\n    return (\r\n        <div className=\"bg-white shadow-lg rounded-xl p-8 w-full max-w-md flex flex-col items-center\">\r\n\r\n            <div className=\"relative w-[400px] h-[200px] mx-auto mb-2\">\r\n                <Image\r\n                    src=\"/logo-cleengo.svg\"\r\n                    alt=\"CleenGo Logo\"\r\n                    fill\r\n                    className=\"object-contain\"\r\n                />\r\n            </div>\r\n\r\n            <h2 className=\"text-2xl font-semibold text-center mb-6\">\r\n                Registro Proveedor\r\n            </h2>\r\n\r\n            <form className=\"flex flex-col gap-4 w-full\" onSubmit={handleSubmit(onSubmit)}>\r\n\r\n                {/* NOMBRE */}\r\n                <div className=\"flex flex-col\">\r\n                    <label>Nombre</label>\r\n                    <input\r\n                        className=\"border rounded-lg px-3 py-2\"\r\n                        {...register(\"name\", { required: \"El nombre es obligatorio\" })}\r\n                    />\r\n                    {errors.name && <span className=\"text-red-500\">{errors.name.message}</span>}\r\n                </div>\r\n\r\n                {/* APELLIDO */}\r\n                <div className=\"flex flex-col\">\r\n                    <label>Apellido</label>\r\n                    <input\r\n                        className=\"border rounded-lg px-3 py-2\"\r\n                        {...register(\"surname\", { required: \"El apellido es obligatorio\" })}\r\n                    />\r\n                    {errors.surname && <span className=\"text-red-500\">{errors.surname.message}</span>}\r\n                </div>\r\n\r\n                {/* EMAIL */}\r\n                <div className=\"flex flex-col\">\r\n                    <label>Correo</label>\r\n                    <input\r\n                        type=\"email\"\r\n                        className=\"border rounded-lg px-3 py-2\"\r\n                        {...register(\"email\", {\r\n                            required: \"El correo es obligatorio\",\r\n                            pattern: {\r\n                                value: /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/,\r\n                                message: \"Correo inválido\",\r\n                            },\r\n                        })}\r\n                    />\r\n                    {errors.email && <span className=\"text-red-500\">{errors.email.message}</span>}\r\n                </div>\r\n\r\n                {/* PASSWORD */}\r\n                <div className=\"flex flex-col\">\r\n                    <label>Contraseña</label>\r\n                    <input\r\n                        type=\"password\"\r\n                        className={`border rounded-lg px-3 py-2 \r\n            ${errors.password ? \"border-red-500\" : \"border-black-300\"}`}\r\n                        {...register(\"password\", {\r\n                            required: \"La contraseña es obligatoria\",\r\n                            validate: {\r\n                                minLength: (value) =>\r\n                                    value.length >= 8 || \"Debe tener mínimo 8 caracteres\",\r\n                                hasUpperCase: (value) =>\r\n                                    /[A-Z]/.test(value) || \"Debe incluir una mayúscula\",\r\n                                hasLowerCase: (value) =>\r\n                                    /[a-z]/.test(value) || \"Debe incluir una minúscula\",\r\n                                hasNumber: (value) =>\r\n                                    /\\d/.test(value) || \"Debe incluir un número\",\r\n                            },\r\n                        })}\r\n                    />\r\n\r\n                    {/* MENSAJE DE ERROR */}\r\n                    {errors.password && (\r\n                        <span className=\"text-red-500 text-sm mt-1\">\r\n                            {errors.password.message}\r\n                        </span>\r\n                    )}\r\n                </div>\r\n\r\n                {/* CONFIRM PASSWORD */}\r\n                <div className=\"flex flex-col\">\r\n                    <label>Confirmar contraseña</label>\r\n                    <input\r\n                        type=\"password\"\r\n                        className={`border rounded-lg px-3 py-2 \r\n            ${errors.confirmPassword ? \"border-red-500\" : \"border-black-300\"}`}\r\n                        {...register(\"confirmPassword\", {\r\n                            required: \"Debes confirmar la contraseña\",\r\n                            validate: (value) =>\r\n                                value === passwordValue || \"Las contraseñas no coinciden\",\r\n                        })}\r\n                    />\r\n                    {errors.confirmPassword && (\r\n                        <span className=\"text-red-500 text-sm mt-1\">\r\n                            {errors.confirmPassword.message}\r\n                        </span>\r\n                    )}\r\n                </div>\r\n                {/* FECHA DE NACIMIENTO */}\r\n                <div className=\"flex flex-col\">\r\n                    <label>Fecha de nacimiento</label>\r\n                    <input\r\n                        type=\"date\"\r\n                        className=\"border rounded-lg px-3 py-2\"\r\n                        {...register(\"birthDate\", {\r\n                            required: \"La fecha de nacimiento es obligatoria\",\r\n                            validate: (value) =>\r\n                                validateAge(value) >= 18 ||\r\n                                \"Debes ser mayor de 18 años\",\r\n                        })}\r\n                    />\r\n                    {errors.birthDate && (\r\n                        <span className=\"text-red-500\">{errors.birthDate.message}</span>\r\n                    )}\r\n                </div>\r\n\r\n                {/* PHONE */}\r\n                <div className=\"flex flex-col\">\r\n                    <label>Teléfono</label>\r\n                    <input\r\n                        className=\"border rounded-lg px-3 py-2\"\r\n                        {...register(\"phone\", {\r\n                            required: \"El teléfono es obligatorio\",\r\n                            pattern: {\r\n                                value: /^[0-9]+$/,\r\n                                message: \"Solo números\",\r\n                            },\r\n                            minLength: { value: 9, message: \"Debe tener al menos 9 dígitos\" },\r\n                            maxLength: { value: 15, message: \"Número demasiado largo\" },\r\n                        })}\r\n                    />\r\n                    {errors.phone && <span className=\"text-red-500\">{errors.phone.message}</span>}\r\n                </div>\r\n\r\n                <button\r\n                    disabled={loading}\r\n                    className=\"bg-blue-600 text-white py-2 rounded-lg hover:opacity-90 disabled:opacity-70\"\r\n                >\r\n                    {loading ? \"Registrando...\" : \"Registrarme como Proveedor\"}\r\n                </button>\r\n\r\n                {error && <p className=\"text-red-500\">{error}</p>}\r\n                {success && <p className=\"text-green-600\">{success}</p>}\r\n            </form>\r\n        </div>\r\n    );\r\n}"],"names":[],"mappings":"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"}}]
}